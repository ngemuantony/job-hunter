<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <!-- Link to external CSS file -->
    <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='style_dashboard.css') }}"> 
    <link type="text/css" rel="stylesheet" href="../static/style_dashboard.css">
</head>
<body>
    <!-- Navigation -->
    <div class="container">
        <div class="navigation">
            <ul>
                <li>
                    <a href="">
                        <span class="icon">
                            <ion-icon name="laptop"></ion-icon>
                        </span>
                        <span class="title">CyberLink</span>
                    </a>
                </li>

                <li>
                    <a href="">
                        <span class="icon">
                            <ion-icon name="home"></ion-icon>
                        </span>
                        <span class="title">Dashboard</span>
                    </a>
                </li>

                <li>
                    <a href="">
                        <span class="icon">
                            <ion-icon name="people"></ion-icon>
                        </span>
                        <span class="title">Applicants</span>
                    </a>
                </li>

                <li>
                    <a href="">
                        <span class="icon">
                            <ion-icon name="chatbubbles"></ion-icon>
                        </span>
                        <span class="title">Messages</span>
                    </a>
                </li>

                <li>
                    <a href="">
                        <span class="icon">
                            <ion-icon name="help-circle"></ion-icon>
                        </span>
                        <span class="title">Help</span>
                    </a>
                </li>

                <li>
                    <a href="">
                        <span class="icon">
                            <ion-icon name="settings"></ion-icon>
                        </span>
                        <span class="title">Settings</span>
                    </a>
                </li>

                <li>
                    <a href="">
                        <span class="icon">
                            <ion-icon name="lock"></ion-icon>
                        </span>
                        <span class="title">Password</span>
                    </a>
                </li>

                <li> 
                    <a href="">
                        <span class="icon">
                            <ion-icon name="log-out"></ion-icon>
                        </span>
                        <span class="title">Sign Out</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main">
        <!-- Top bar -->
        <div class="topbar">
            <div class="toggle">
                <ion-icon name="menu"></ion-icon>
            </div>
            <div class="search">
                <label>
                    <input type="text" placeholder="Search here">
                    <ion-icon name="search"></ion-icon>
                </label>
            </div>
            <div class="user">
                <img src="/assets/imgs/antony.jpg" alt="">
            </div>
        </div>

        <!-- Cards -->
        <div class="cardBox">
            <div class="card">
                <div>
                    <div class="numbers">
                        {{ total_users_count }}
                    </div>
                    <div class="cardName">
                        Number of Users
                    </div>
                </div>
                <div class="iconBox">
                    <ion-icon name="eye"></ion-icon>
                </div>
            </div>

            <div class="card">
                <div>
                    <div class="numbers">
                        102
                    </div>
                    <div class="cardName">
                        Applications
                    </div>
                </div>
                <div class="iconBox">
                    <ion-icon name="cart"></ion-icon>
                </div>
            </div>

            <div class="card">
                <div>
                    <div class="numbers">
                        1325647
                    </div>
                    <div class="cardName">
                        Comments
                    </div>
                </div>
                <div class="iconBox">
                    <ion-icon name="chatboxes"></ion-icon>
                </div>
            </div>

            <div class="card">
                <div>
                    <div class="numbers">
                        {{ job_count}}
                    </div>
                    <div class="cardName">
                       Available Jobs
                    </div>
                </div>
                <div class="iconBox">
                    <ion-icon name="wallet"></ion-icon>
                </div>
            </div>
        </div>

        <!-- Order Details -->
        <div class="details">
            <div class="recentOrders">
                <div class="cardHeader">
                    <h2>Recent Applications</h2>
                    <a href="#" class="btn">View All</a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <td>Name</td>
                            <td>Price</td>
                            <td>Payment</td>
                            <td>Status</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Air Conditioner</td>
                            <td>Ksh 56,000</td>
                            <td>Paid</td>
                            <td><span class="status delivered">Confirmed</span></td>
                        </tr>
                        <tr>
                            <td>Lenovo Thinkpadr</td>
                            <td>Ksh 34,999</td>
                            <td>Due</td>
                            <td><span class="status pending">Pending</span></td>
                        </tr>
                        <tr>
                            <td>DJI Mini 2</td>
                            <td>Ksh 79,999</td>
                            <td>Paid</td>
                            <td><span class="status return">Not Approved</span></td>
                        </tr>
                        <tr>
                            <td>Smart Lock</td>
                            <td>Ksh 9,999</td>
                            <td>Due</td>
                            <td><span class="status inProgress">Reviewing</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Active Users -->
            <div class="Most Applied">
                <div class="cardHeader">
                    <h2>CURRENT STATISTICS</h2>
                </div>
                <table>
                    <tr>
                        <td>
                            <div class="imgBox">
                                <h3>POSTS</h3>
                                <table style="color: blue;">
                                    {% for job in jobs %}
                                        <tr>
                                            <td>{{ job.title }}</td>
                                        </tr>
                                    {% endfor %}
                                </table>
                                <br>
                                <p>
                                <span style="background-color: orange;
                                ">
                                    TOTAL POSTS
                                </span>:
                                <span style="color: orange;
                                font-size: 20px;
                                font-family: 'Times New Roman', Times, serif;
                                font-weight: bolder;">
                                    {{ job_count }}
                                </span>
                                </p>
                            </div>
                        </td>
                        <hr>
                        <td>
                            <div class="userBox">
                                <h3>ACTIVE USERS</h3>
                                <table>
                                    {% for user in active_users %}
                                        <tr>
                                            <td>{{ user.username }} <span style="color: greenyellow;font-weight: bolder;">Online</span><br>
                                            <span class="sign_in_time">{{ user.sign_in_time }}</span></td>
                                        </tr>
                                    {% endfor %}
                                </table>
                                <br>
                                <p> 
                                <span style="background-color: green;">
                                    ACTIVE USERS
                                </span>:
                                <span style="color:green;
                                font-family: 'Times New Roman', Times, serif;
                                font-weight: bolder;
                                font-size: 20px;"
                                >
                                    {{ total_users_count }}
                                </span>
                                </p>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
            
        </div>
    </div>

    <!-- Scripts -->
    <script src="../static/main.js"></script>
    <script src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons.js"></script>
    <script>
        setTimeout(function(){
            window.location.reload(1);
        }, 20000);
    </script>
</body>
</html>
